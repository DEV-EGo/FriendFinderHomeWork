<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>FriendFinder</title>
        <!-- Latest compiled and minified CSS & JS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
            crossorigin="anonymous" />
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
        <!-- Font Awesome Glyphicons -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" />
        <!-- css -->
        <link rel="stylesheet" type="text/css" href="../public/style.css" />

        <!-- chosen jquery pluggin that makes long, unwieldy select boxes much more user friendly-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    </head>

    <body>
        <div class="container">
            <div class="jumbotron">
                <div class="Mntitle">
                    <h1>Meet Your Forever</h1>
                </div>
                <hr />
                <h2 class="Mntitle">
                    Then find the one with the greatest compatibility!
                </h2>
            </div>

            <h2>Survey Questions</h2>
            <hr />
            <h3><strong>About You</strong></h3>
            <h4>Name (Required)</h4>
            <input type="text" name="" id="name" class="form-control" required />
            <h4>Link to photo (Required)</h4>
            <input type="text" name="" id="photo" class="form-control" required />
            <hr />

            <!-- questions -->
            <h3><strong>Question 1</strong></h3>
            <h4>I like to take risks and challenges excite you.</h4>
            <select data-placeholder="" class="chosen-select" id="q1">
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (im scared)</option>
            </select>

            <h3><strong>Question 2</strong></h3>
            <h4>Do I consider myself a creative person</h4>
            <select data-placeholder="" class="chosen-select" id="q2">
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3" selected>3</option>
                <option value="4">4</option>
                <option value="5">5 (Cockiness Level Kanye)</option>
            </select>

            <h3><strong>Question 3</strong></h3>
            <h4>is money important to me</h4>
            <select data-placeholder="" class="chosen-select" id="q3">
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4" selected>4</option>
                <option value="5">5 (i love money)</option>
            </select>

            <section class="form-group">
                <h3><strong>Question 4</strong></h3>
                <h4>I like animals</h4>
                <select data-placeholder="" class="chosen-select" id="q4">
                    <option value=""></option>
                    <option value="1" selected>1 (i hate them)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </section>
            <h3><strong>Question 5</strong></h3>
            <h4>like to meet new people</h4>
            <select data-placeholder="" class="chosen-select" id="q5">
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4" selected>4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <section class="form-group">
                <h3><strong>Question 6</strong></h3>
                <h4>are you scared of commitment?</h4>
                <select data-placeholder="" class="chosen-select" id="q6">
                    <option value=""></option>
                    <option value="1">1 (what is loyalty)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (no sir)</option>
                </select>
            </section>

            <section class="form-group">
                <h3><strong>Question 7</strong></h3>
                <h4>are you contempt with the status-quo?</h4>
                <select data-placeholder="" class="chosen-select" id="q7">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2" selected>2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </section>

            <section class="form-group">
                <h3><strong>Question 8</strong></h3>
                <h4>like playing an instrument</h4>
                <select data-placeholder="" class="chosen-select" id="q8">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4" selected>4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </section>

            <section class="form-group">
                <h3><strong>Question 9</strong></h3>
                <h4>Do you like rock n' roll</h4>
                <select data-placeholder="" class="chosen-select" id="q9">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4" selected>4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </section>

            <section class="form-group">
                <h3><strong>Question 10</strong></h3>
                <h4>Are You a party animal </h4>
                <select data-placeholder="" class="chosen-select" id="q10">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4" selected>4</option>
                    <option value="5">5 (lets get chocolate wasted!)</option>
                </select>
            </section>
            <br />
            <br />

            <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
                <i class="fa fa-check-circle" aria-hidden="true"></i> Submit
            </button>
            <br />
            <br />

            <!-- questions end -->

            <!-- github link -->
            <footer class="footer text-center">
                <div class="container">
                    <p><a href="#">Home</a> |
                        <a href="https://github.com/E-Go93/Friend-Finder">GitHub Repo</a>
                        <br />
                    </p>
                </div>
            </footer>
        </div>

        <!-- modal -->
        <div id="resultsModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- content stored inside modal -->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h2 class="modal-title"><strong>Best Match</strong></h2>
                    </div>
                    <div class="modal-body">
                        <h2 id="matchName"></h2>
                        <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg"
                            alt="">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">close</button>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            /// chosen css
            var config = {
                ".chosen-select": {},
                ".chosen-select-deselect": { allow_single_deselect: true },
                ".chosen-select-no-single": { disable_search_threshold: 10 },
                ".chosen-select-no-results": { no_results_text: " nothing found!" },
                ".chosen-select-width": { width: "95%" }

            };
            for (var selector in config) {
                $(selector).chosen(config[selector]);
            }

            //capturing the form input with the submitbutton
            $("#submit").on("click", function () {

                //validation for the form
                function validateForm() {
                    var isValid = true;
                    $(".form-control").each(function () {
                        if ($(this).val() === "") {
                            isValid = false;
                        }
                    });

                    $(".chosen-select").each(function () {

                        if ($(this).val() === "") {
                            isValid = false;
                        }
                    });
                    return isValid;
                }

                //creating an object for the user data if the fields are filled
                if (validateForm()) {

                    var userData = {
                        name: $("#name").val(),
                        photo: $("photo").val(),
                        scores: [
                            $("#q1").val(),
                            $("#q2").val(),
                            $("#q3").val(),
                            $("#q4").val(),
                            $("#q5").val(),
                            $("#q6").val(),
                            $("#q7").val(),
                            $("#q8").val(),
                            $("#q9").val(),
                            $("#q10").val(),
                        ]
                    };
                    //grab the URL 0f the website
                    var currentURL = window.location.origin;

                    $.post(currentURL + "/api/friends", userData, function (data) {

                        // grab image of the match and display
                        $("#matchName").text(data.name);
                        $("#matchImg").attr("src", data.photo);

                        $("#resultsModal").modal("toggle");

                    });
                }
                else {
                    alert("please fill out all of the fields before hitting submitt");
                }
                return false;
            });

        </script>
    </body>

</html>